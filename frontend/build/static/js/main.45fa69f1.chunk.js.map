{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","utils/api.js","components/ImagePopup.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","images/Union.svg","images/Union-1.svg","components/InfoTooltip.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","index.js"],"names":["Header","props","loggedIn","onSignOut","userData","loginState","email","className","src","logo","alt","onClick","to","CurrentUserContext","React","createContext","Card","currentUser","useContext","useState","card","likes","some","i","_id","liked","setLiked","isOwn","owner","onCardDelete","type","onCardClick","link","name","onCardLike","likeCounter","Main","loader","onEditAvatar","avatar","onEditProfile","about","onAddCard","cards","map","length","Footer","date","Date","getFullYear","api","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_responseResult","data","body","JSON","stringify","isLikes","addLike","deleteLike","authorization","ImagePopup","onClose","PopupWithForm","isOpen","id","onSubmit","noValidate","title","children","submitText","AddPlacePopup","buttonText","setButtonText","setName","setLink","handleClosePopup","setTimeout","e","preventDefault","onAddPlace","finally","placeholder","minLength","maxLength","onChange","target","value","required","EditProfilePopup","description","setDescription","useEffect","onUpdateUser","EditAvatarPopup","avatarRef","useRef","current","onUpdateAvatar","ref","InfoTooltip","successStyle","errorImg","backgroundImage","union","successImg","icon","style","Login","onLogin","onLoginState","setEmail","password","setPassword","history","useHistory","push","catch","err","console","log","autoComplete","Register","onRegister","ProtectedRoute","Component","component","BASE_URL","App","setLoggedIn","setLoginState","isTooltipOpen","setIsTooltipOpen","setUserData","successToolTip","setSuccessToolTip","isEditProfilePopupOpen","setEditProfilePopupOpenClose","isAddCardPopupOpen","setAddCardPopupOpenClose","isEditAvatarPopupOpen","setEditAvatarPopupOpenClose","selectedCard","setSelectedCard","isImagePopupOpen","setIsImagePopupOpen","setCurrentUser","userInfoGet","setUserInfoGet","setCards","closeAllPopups","handleTooltipOpen","handleLoginState","state","handleSuccessToolTip","tokenCheck","token","jwt","localStorage","getItem","Accept","Authorization","Error","removeItem","all","getUserData","getInitialCards","userInfo","cardList","Provider","exact","path","deleteCard","newCard","newCards","filter","c","isLiked","changeLikeCardStatus","auth","openToolTip","setItem","updateUserData","result","addNewCard","updateAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.45fa69f1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.a307e1c4.svg\";","import React from \"react\";\nimport logo from \"../images/logo.svg\";\nimport { Link } from \"react-router-dom\";\n\nfunction Header(props) {\n  const { loggedIn, onSignOut, userData, loginState } = props;\n  const email = userData ? userData.email : \"\";\n  return (\n    <header className=\"header\">\n      <img src={logo} alt=\"лого\" className=\"header__logo\" />\n      {loggedIn ? (\n        <>\n          <nav className=\"header__nav\">\n            <ul className=\"header__list header__list-main\">\n              <li className=\"header__list-item\">{email}</li>\n              <li onClick={onSignOut} className=\"header__list-link\">\n                Выйти\n              </li>\n            </ul>\n          </nav>\n        </>\n      ) : (\n        <Link\n          to={loginState ? \"/sign-in\" : \"/sign-up\"}\n          className=\"header__list-link\"\n        >\n          {loginState ? \"Войти\" : \"Регистрация\"}\n        </Link>\n      )}\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [liked, setLiked] = React.useState(\n    props.card.likes.some((i) => i._id === currentUser._id)\n  );\n  const isOwn = props.card.owner._id === currentUser._id;\n\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n\n  function likeClick() {\n    setLiked(!liked);\n    props.onCardLike(props.card);\n  }\n\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <>\n      <li className=\"card\">\n        <button\n          onClick={handleDeleteClick}\n          className={`card__trash ${isOwn ? \"card__trash_active\" : \"\"}`}\n          type=\"button\"\n        />\n        <img\n          className=\"card__images\"\n          onClick={handleClick}\n          src={props.card.link}\n          alt={props.card.name}\n        />\n        <div className=\"card__item\">\n          <h2 className=\"card__title\">{props.card.name}</h2>\n          <div className=\"card__wrap\">\n            <button\n              className={`card__like ${liked && \"card__like_active\"}`}\n              onClick={likeClick}\n              type=\"button\"\n            ></button>\n            <div className=\"card__count\">{props.likeCounter}</div>\n          </div>\n        </div>\n      </li>\n    </>\n  );\n}\n\nexport default Card;\n","import React from \"react\";\nimport Card from \"./Card\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  return (\n    <>\n      <div className={`loading ${props.loader && \"hide\"}`}></div>\n      <section className=\"profile\">\n        <div className=\"profile__item\">\n          <div className=\"profile__item-container\">\n            <img\n              onClick={props.onEditAvatar}\n              src={currentUser.avatar}\n              alt=\"Фото профиля\"\n              className=\"profile__avatar\"\n            />\n          </div>\n          <div className=\"profile_text\">\n            <div className=\"profile__info\">\n              <h1 className=\"profile__title\">{currentUser.name || \"\"}</h1>\n              <button\n                className=\"profile__edit-button\"\n                onClick={props.onEditProfile}\n                type=\"button\"\n              ></button>\n            </div>\n            <p className=\"profile__subtitle\">{currentUser.about || \"\"}</p>\n          </div>\n        </div>\n        <button\n          className=\"profile__add-button\"\n          onClick={props.onAddCard}\n          type=\"button\"\n        ></button>\n      </section>\n\n      <section className=\"elements\">\n        <ul className=\"cards\">\n          {props.cards.map((card) => (\n            <Card\n              key={card._id}\n              card={card}\n              onCardClick={props.onCardClick}\n              likeCounter={card.likes.length}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n            />\n          ))}\n        </ul>\n      </section>\n    </>\n  );\n}\n\nexport default Main;\n","import React from \"react\";\n\nfunction Footer() {\n  const date = new Date().getFullYear();\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; {date} Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","class Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n\n  _responseResult(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      method: \"GET\",\n      headers: this._headers,\n    }).then((res) => {\n      return this._responseResult(res);\n    });\n  }\n  getUserData() {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: this._headers,\n    }).then((res) => {\n      return this._responseResult(res);\n    });\n  }\n  addNewCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link,\n      }),\n    }).then((res) => {\n      return this._responseResult(res);\n    });\n  }\n\n  deleteCard(data) {\n    return fetch(`${this._url}/cards/${data}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => {\n      return this._responseResult(res);\n    });\n  }\n\n  updateUserData(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify(data),\n    }).then((res) => {\n      return this._responseResult(res);\n    });\n  }\n\n  changeLikeCardStatus(card, isLikes) {\n    if (isLikes) {\n      return this.addLike(card);\n    } else {\n      return this.deleteLike(card);\n    }\n  }\n\n  addLike(data) {\n    return fetch(`${this._url}/cards/likes/${data}`, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then((res) => {\n      return this._responseResult(res);\n    });\n  }\n\n  deleteLike(data) {\n    return fetch(`${this._url}/cards/likes/${data}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => {\n      return this._responseResult(res);\n    });\n  }\n\n  updateAvatar(data) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify(data),\n    }).then((res) => {\n      return this._responseResult(res);\n    });\n  }\n}\n\nconst api = new Api({\n  url: \"https://mesto.nomoreparties.co/v1/cohort-17\",\n  headers: {\n    authorization: \"1cc28c27-5ad4-4b72-97ab-db6c8b468da3\",\n    \"content-type\": \"application/json\",\n  },\n});\n\nexport default api;\n","function ImagePopup(props) {\n  return (\n    <div\n      className={`popup__container popup__container_image ${\n        props.card.link && \"popup_opened\"\n      }`}\n    >\n      <figure className=\"popup__image\">\n        <button\n          className=\"popup__close-button popup__close-button_img\"\n          onClick={props.onClose}\n          type=\"button\"\n        ></button>\n        <img\n          className=\"popup__images\"\n          src={`${props.card.link}`}\n          alt={props.card.name}\n        />\n        <figcaption className=\"popup__text\">{props.card.name}</figcaption>\n      </figure>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","import React from \"react\";\n\nfunction PopupWithForm(props) {\n  return (\n    <div\n      className={`popup__container ${props.isOpen && \"popup_opened\"}`}\n      id={props.name}\n    >\n      <form\n        onSubmit={props.onSubmit}\n        className=\"popup__form\"\n        name={props.name}\n        noValidate\n      >\n        <button\n          className=\"popup__close-button\"\n          onClick={props.onClose}\n          type=\"button\"\n        ></button>\n        <h2 className=\"popup__title\">{props.title}</h2>\n        {props.children}\n        <button className=\"popup__button\" type=\"submit\">\n          {props.submitText}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\n\nfunction AddPlacePopup(props) {\n  const [buttonText, setButtonText] = React.useState(\"Создать\");\n  const [name, setName] = React.useState(\"\");\n  const [link, setLink] = React.useState(\"\");\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n  function handleLinkChange(e) {\n    setLink(e.target.value);\n  }\n  function handleClosePopup() {\n    props.onClose();\n    setTimeout(() => {\n      setName(\"\");\n      setLink(\"\");\n    }, 200);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setButtonText(\"Создаем...\");\n    props\n      .onAddPlace({ name, link })\n      .then(() => handleClosePopup())\n      .finally(() => {\n        setButtonText(\"Создать\");\n      });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"image_add\"\n      title=\"Новое место\"\n      submitText={buttonText}\n      isOpen={props.isOpen}\n      onClose={handleClosePopup}\n      onSubmit={handleSubmit}\n    >\n      <label className=\"popup__field\">\n        <input\n          type=\"text\"\n          className=\"popup__input popup__input_type_name-image\"\n          id=\"image-name-input\"\n          name=\"name\"\n          placeholder=\"Название\"\n          minLength=\"1\"\n          maxLength=\"30\"\n          onChange={handleNameChange}\n          value={name}\n          required\n        />\n        <span className=\"popup__input-error\" id=\"image-name-input-error\"></span>\n      </label>\n      <label className=\"popup__field\">\n        <input\n          type=\"url\"\n          className=\"popup__input popup__input_type_prof-link\"\n          id=\"image-source-input\"\n          name=\"link\"\n          placeholder=\"Ссылка на картинку\"\n          onChange={handleLinkChange}\n          value={link}\n          required\n        />\n        <span\n          className=\"popup__input-error\"\n          id=\"image-source-input-error\"\n        ></span>\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\n\nfunction EditProfilePopup(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const [buttonText, setButtonText] = React.useState(\"Сохранить\");\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n  function handleAboutChange(e) {\n    setDescription(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    setButtonText(\"Загрузка...\");\n    props\n      .onUpdateUser({ name: name, about: description })\n      .then(() => props.onClose())\n      .finally(() => {\n        setButtonText(\"Сохранить\");\n      });\n  }\n\n  React.useEffect(() => {\n    if (props.isOpen === true) {\n      setName(currentUser.name);\n      setDescription(currentUser.about);\n    } // eslint-disable-next-line\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm\n      name=\"form\"\n      title=\"Редактировать профиль\"\n      submitText={buttonText}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <label className=\"popup__field\">\n        <input\n          className=\"popup__input popup__input_type_name\"\n          type=\"text\"\n          name=\"name\"\n          id=\"profile-name\"\n          minLength=\"2\"\n          maxLength=\"40\"\n          value={name}\n          onChange={handleNameChange}\n          required\n        />\n        <span className=\"popup__input-error\" id=\"profile-name-error\"></span>\n      </label>\n      <label className=\"popup__field\">\n        <input\n          className=\"popup__input popup__input_type_prof\"\n          type=\"text\"\n          name=\"description\"\n          id=\"profile-prof\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          value={description}\n          onChange={handleAboutChange}\n          required\n        />\n        <span className=\"popup__input-error\" id=\"profile-prof-error\"></span>\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import PopupWithForm from \"./PopupWithForm.js\";\nimport React from \"react\";\n\nfunction EditAvatarPopup(props) {\n  const [buttonText, setButtonText] = React.useState(\"Сохранить\");\n  const avatarRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setButtonText(\"Загрузка...\");\n    props\n      .onUpdateAvatar({ avatar: avatarRef.current.value })\n      .then(() => {\n        handleClosePopup();\n      })\n      .finally(() => {\n        setButtonText(\"Сохранить\");\n      });\n  }\n\n  function handleClosePopup() {\n    props.onClose();\n    setTimeout(() => (avatarRef.current.value = \"\"), 200);\n  }\n\n  return (\n    <PopupWithForm\n      name=\"avatar_add\"\n      title=\"Обновить аватар\"\n      submitText={buttonText}\n      isOpen={props.isOpen}\n      onClose={handleClosePopup}\n      onSubmit={handleSubmit}\n    >\n      <label className=\"popup__field\">\n        <input\n          ref={avatarRef}\n          type=\"url\"\n          className=\"popup__input popup__input_type_avatar-link\"\n          id=\"avatar-source-input\"\n          name=\"avatar\"\n          placeholder=\"Ссылка на картинку\"\n          required\n        />\n        <span\n          className=\"popup__input-error\"\n          id=\"avatar-source-input-error\"\n        ></span>\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","export default __webpack_public_path__ + \"static/media/Union.df8eddf6.svg\";","export default __webpack_public_path__ + \"static/media/Union-1.1b6082f8.svg\";","import React from \"react\";\nimport union from \"../images/Union.svg\";\nimport icon from \"../images/Union-1.svg\";\n\nfunction InfoTooltip(props) {\n  const { isOpen, onClose, successStyle } = props;\n  const errorImg = {\n    backgroundImage: \"url(\" + union + \")\",\n  };\n  const successImg = {\n    backgroundImage: \"url(\" + icon + \")\",\n  };\n\n  return (\n    <div\n      className={isOpen ? \"popup__container popup_opened\" : \"popup__container\"}\n    >\n      <form className=\"popup__form\">\n        <button\n          onClick={onClose}\n          className=\"popup__close-button\"\n          type=\"button\"\n        />\n        <div\n          className=\"popup__image_login\"\n          style={successStyle ? successImg : errorImg}\n        />\n        <h2 className=\"popup__title popup__title_infotooltip\">\n          {successStyle\n            ? \"Вы успешно зарегистрировались!\"\n            : \"Что-то пошло не так! Попробуйте ещё раз.\"}\n        </h2>\n      </form>\n    </div>\n  );\n}\n\nexport default InfoTooltip;\n","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nfunction Login(props) {\n  const { onLogin, onLoginState } = props;\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const history = useHistory();\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!email || !password) {\n      return;\n    }\n    onLogin({ email, password })\n      .then(() => {\n        history.push(\"/\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  React.useEffect(() => {\n    onLoginState(false);\n  }, [onLoginState]);\n\n  return (\n    <>\n      <div className=\"popup__login\">\n        <form\n          className=\"popup__form popup__form_login\"\n          onSubmit={handleSubmit}\n          noValidate\n        >\n          <h1 className=\"popup__title popup__title_type-login\">Вход</h1>\n          <input\n            className=\"popup__input popup__input_type-login\"\n            autoComplete=\"off\"\n            type=\"text\"\n            id=\"input-name\"\n            required\n            placeholder=\"Email\"\n            name=\"email\"\n            minLength=\"2\"\n            maxLength=\"40\"\n            value={email || \"\"}\n            onChange={handleEmailChange}\n          />\n          <span className=\"popup__span-error\" id=\"input-name-error\" />\n          <input\n            className=\"popup__form-input popup__input_type-login\"\n            autoComplete=\"off\"\n            type=\"password\"\n            id=\"input-profession\"\n            required\n            placeholder=\"Пароль\"\n            name=\"password\"\n            minLength=\"2\"\n            maxLength=\"200\"\n            value={password || \"\"}\n            onChange={handlePasswordChange}\n          />\n          <span className=\"popup__span-error\" id=\"input-profession-error\" />\n          <button className=\"popup__button popup__button_login\">Войти</button>\n          <p className=\"login__text\">\n            Ещё не зарегистрированы?\n            <Link to=\"/sign-up\" className=\"login__link\">\n              {\" \"}\n              Регистрация\n            </Link>\n          </p>\n        </form>\n      </div>\n    </>\n  );\n}\n\nexport default Login;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Register(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const { onRegister, onLoginState } = props;\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onRegister({ email, password });\n  };\n\n  React.useEffect(() => {\n    onLoginState(true);\n  }, [onLoginState]);\n\n  return (\n    <>\n      <div className=\"popup__login\">\n        <form\n          className=\"popup__form popup__form_login\"\n          onSubmit={handleSubmit}\n          noValidate\n        >\n          <h1 className=\"popup__title popup__title_type-login\">Регистрация</h1>\n          <input\n            className=\"popup__input popup__input_type-login\"\n            autoComplete=\"off\"\n            type=\"text\"\n            id=\"input-name\"\n            required\n            placeholder=\"Email\"\n            name=\"email\"\n            minLength=\"2\"\n            maxLength=\"40\"\n            value={email || \"\"}\n            onChange={handleEmailChange}\n          />\n          <span className=\"popup__span-error\" id=\"input-name-error\" />\n          <input\n            className=\"popup__input popup__input_type-login\"\n            autoComplete=\"off\"\n            type=\"password\"\n            id=\"input-profession\"\n            required\n            placeholder=\"Пароль\"\n            name=\"password\"\n            minLength=\"2\"\n            maxLength=\"200\"\n            value={password || \"\"}\n            onChange={handlePasswordChange}\n          />\n          <span className=\"popup__span-error\" id=\"input-profession-error\" />\n          <button className=\"popup__button popup__button_login\">\n            Зарегистрироваться\n          </button>\n          <p className=\"login__text\">\n            Уже зарегистрированы?\n            <Link to=\"sign-in\" className=\"login__link\">\n              {\" \"}\n              Войти\n            </Link>\n          </p>\n        </form>\n      </div>\n    </>\n  );\n}\n\nexport default Register;\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","export const BASE_URL = \"https://auth.nomoreparties.co\";\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => {\n      if (res.status !== 400) {\n        return res.json();\n      } else {\n        throw new Error(\"Некорректно заполнено одно из полей\");\n      }\n    })\n    .then((res) => {\n      return res;\n    })\n    .catch((err) => {\n      console.log(err);\n      return Promise.reject(err);\n    });\n};\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n      if (res.status === 400) {\n        throw new Error(\"Не передано одно из полей\");\n      }\n      if (res.status === 401) {\n        throw new Error(\"Пользователь с email не найден\");\n      }\n    })\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem(\"jwt\", data.token);\n        return data;\n      }\n      return;\n    })\n    .catch((err) => {\n      console.log(err);\n      return Promise.reject(err);\n    });\n};\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  })\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n      if (res.status === 400) {\n        throw new Error(\"Токен не передан или передан не в том формате\");\n      }\n      if (res.status === 401) {\n        throw new Error(\"Переданный токен некорректен\");\n      }\n    })\n    .then((data) => {\n      return data;\n    })\n    .catch((err) => {\n      console.log(err);\n      return Promise.reject(err);\n    });\n};\n\n// const checkResponse = (response) =>\n//   response.ok ? response.json() : Promise.reject(\"Ошибка на сервере!\");\n","import React from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport api from \"../utils/api\";\nimport ImagePopup from \"./ImagePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport * as auth from \"../utils/auth.js\";\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [loginState, setLoginState] = React.useState(false);\n  const [isTooltipOpen, setIsTooltipOpen] = React.useState(false);\n  const [userData, setUserData] = React.useState({});\n  const [successToolTip, setSuccessToolTip] = React.useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpenClose] = React.useState(\n    false\n  );\n  const [isAddCardPopupOpen, setAddCardPopupOpenClose] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpenClose] = React.useState(\n    false\n  );\n  const [selectedCard, setSelectedCard] = React.useState({\n    name: \"\",\n    link: \"\",\n  });\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [userInfoGet, setUserInfoGet] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const history = useHistory();\n\n  React.useEffect(() => {\n    Promise.all([api.getUserData(), api.getInitialCards()])\n      .then(([userInfo, cardList]) => {\n        setCurrentUser(userInfo);\n        setCards(cardList);\n        setUserInfoGet(true);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpenClose(!isEditProfilePopupOpen);\n  }\n  function handleAddPlaceClick() {\n    setAddCardPopupOpenClose(!isAddCardPopupOpen);\n  }\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpenClose(!isEditAvatarPopupOpen);\n  }\n\n  function handleImagePopupOpen(card) {\n    setSelectedCard(card);\n    setIsImagePopupOpen(!isImagePopupOpen);\n  }\n\n  function closeAllPopups() {\n    setEditProfilePopupOpenClose(false);\n    setAddCardPopupOpenClose(false);\n    setEditAvatarPopupOpenClose(false);\n    setIsImagePopupOpen(false);\n    setSelectedCard({ name: \"\", link: \"\" });\n    setSuccessToolTip(false);\n    setIsTooltipOpen(false);\n  }\n\n  function handleUpdateUser(data) {\n    return api\n      .updateUserData(data)\n      .then((result) => {\n        setCurrentUser(result);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleUpdateAvatar(data) {\n    return api\n      .updateAvatar(data)\n      .catch((err) => console.log(err))\n      .then((result) => {\n        setCurrentUser(result);\n      });\n  }\n\n  function handleLikeClick(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        // Обновляем стейт\n        setCards(newCards);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleDeleteClick(card) {\n    api\n      .deleteCard(card._id)\n      .then((newCard) => {\n        const newCards = cards.filter((c) =>\n          c._id === card._id ? \"\" : newCard\n        );\n        setCards(newCards);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleAddPlaceSubmit(card) {\n    return api\n      .addNewCard(card)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleLogin({ email, password }) {\n    return auth\n      .authorize(email, password)\n      .then((res) => {\n        if (res && email) {\n          setLoggedIn(true);\n          history.push(\"/\");\n        } else {\n          throw new Error(\"Не удалось войти в аккаунт\");\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        handleTooltipOpen();\n      });\n  }\n\n  function handleTooltipOpen() {\n    setIsTooltipOpen(true);\n  }\n\n  function handleLoginState(state) {\n    setLoginState(state);\n  }\n\n  function handleRegister({ email, password }) {\n    return auth\n      .register(email, password)\n      .then((res) => {\n        if (res) {\n          handleSuccessToolTip();\n          setTimeout(handleTooltipOpen, 500);\n          history.push(\"/sign-in\");\n        } else {\n          throw new Error(\"Не удалось завершить регистрацию\");\n        }\n      })\n      .catch((err) => {\n        console.log(`Ошибка регистрации пользователя: ${err}`);\n        handleTooltipOpen();\n      });\n  }\n\n  function handleSuccessToolTip() {\n    setSuccessToolTip(true);\n  }\n\n  function signOut() {\n    localStorage.removeItem(\"jwt\");\n    setLoggedIn(false);\n    history.push(\"/sign-in\");\n  }\n\n  function tokenCheck() {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setUserData({\n              id: res.data._id,\n              email: res.data.email,\n            });\n            setLoggedIn(true);\n            history.push(\"/\");\n          } else {\n            localStorage.removeItem(\"jwt\");\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          history.push(\"/sign-in\");\n        });\n    }\n  }\n\n  React.useEffect(() => {\n    tokenCheck();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loggedIn]);\n\n  return (\n    <>\n      <div className=\"container\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header\n            loggedIn={loggedIn}\n            loginState={loginState}\n            onSignOut={signOut}\n            userData={userData}\n          />\n          <Switch>\n            <ProtectedRoute\n              exact\n              path=\"/\"\n              loggedIn={loggedIn}\n              component={Main}\n              loader={userInfoGet}\n              onCardClick={handleImagePopupOpen}\n              onEditProfile={handleEditProfileClick}\n              onAddCard={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardDelete={handleDeleteClick}\n              onCardLike={handleLikeClick}\n              cards={cards}\n            />\n\n            <Route path=\"/sign-up\">\n              <Register\n                onRegister={handleRegister}\n                onLoginState={handleLoginState}\n                openToolTip={handleTooltipOpen}\n                successToolTip={handleSuccessToolTip}\n              />\n            </Route>\n            <Route path=\"/sign-in\">\n              <Login\n                onLogin={handleLogin}\n                onLoginState={handleLoginState}\n                successToolTip={handleSuccessToolTip}\n              />\n            </Route>\n\n            <Route>\n              {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n            </Route>\n          </Switch>\n          <Footer />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddCardPopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          ></EditAvatarPopup>\n\n          <ImagePopup\n            card={selectedCard}\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n          />\n          <InfoTooltip\n            isOpen={isTooltipOpen}\n            onClose={closeAllPopups}\n            successStyle={successToolTip}\n          />\n        </CurrentUserContext.Provider>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"../src/components/App\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}